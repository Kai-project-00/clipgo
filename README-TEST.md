# 확장 프로그램 테스트 가이드

## 문제 해결 방안

기존의 `file://` 프로토콜로 테스트하는 방식은 Chrome Extension의 보안 정책으로 인해 동작하지 않습니다. 실제 확장 프로그램 환경에서 테스트해야 합니다.

## 테스트 방법

### 1. 로컬 서버 실행

```bash
# 터미널에서 프로젝트 디렉토리로 이동
cd /Users/ellykang/workspace/clipgo

# Python으로 간단한 웹 서버 실행
python -m http.server 8000
```

### 2. 브라우저에서 테스트 페이지 열기

웹 브라우저에서 다음 URL로 접속:
```
http://localhost:8000/test-real-extension.html
```

### 3. 확장 프로그램 설치 확인

1. Chrome 브라우저에서 `chrome://extensions/` 열기
2. "개발자 모드" 활성화
3. "압축해제된 확장 프로그램을 로드합니다" 클릭
4. `/Users/ellykang/workspace/clipgo` 디렉토리 선택
5. 확장 프로그램이 활성화되었는지 확인

### 4. 테스트 시나리오

1. **텍스트 선택**: 테스트 페이지의 샘플 텍스트를 드래그하여 선택
2. **드래그 팝업 저장**: 나타나는 팝업에서 저장 버튼 클릭
3. **확장 프로그램 팝업 확인**: 확장 프로그램 아이콘을 클릭하여 팝업 열기
4. **데이터 동기화 확인**: 저장한 데이터가 팝업에 표시되는지 확인

## 디버깅 기능

### 실시간 로그 모니터링
- 테스트 페이지 우측 상단에 디버깅 패널이 표시됩니다
- 텍스트 선택, 저장, 동기화 등의 이벤트가 실시간으로 기록됩니다

### 확장 프로그램 상태 확인
- "확장 프로그램 상태 확인" 버튼으로 현재 상태를 확인할 수 있습니다
- 백그라운드 스크립트와의 통신 상태를 보여줍니다

## 문제 해결

### 확장 프로그램이 로드되지 않는 경우
1. `chrome://extensions/`에서 확장 프로그램이 활성화되어 있는지 확인
2. manifest.json의 permissions 설정이 올바른지 확인
3. 콘솔 에러 메시지를 확인

### "Error loading data" 메시지가 표시되는 경우
1. 디버깅 패널의 로그를 확인
2. StorageManager가 초기화되었는지 확인
3. Chrome Storage API 접근 권한이 있는지 확인

### 동기화가 작동하지 않는 경우
1. 백그라운드 스크립트의 storage listeners가 활성화되어 있는지 확인
2. 팝업의 storage change listener가 등록되어 있는지 확인
3. 실제로 데이터가 저장되었는지 chrome.storage에서 확인

## 주의사항

- `file://` 프로토콜로는 테스트할 수 없습니다
- 반드시 `http://localhost` 또는 실제 웹 서버에서 테스트해야 합니다
- 확장 프로그램을 개발자 모드로 설치해야 합니다
- 테스트 후에는 "테스트 데이터 정리" 버튼으로 데이터를 정리하세요