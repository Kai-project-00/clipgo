<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‹¤ì œ í™•ì¥ í”„ë¡œê·¸ë¨ í…ŒìŠ¤íŠ¸ í˜ì´ì§€</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 40px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 40px;
        }
        .demo-section {
            margin-bottom: 40px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        .demo-section h3 {
            margin-top: 0;
            color: #667eea;
        }
        .sample-text {
            background: white;
            padding: 20px;
            border-radius: 6px;
            border: 1px solid #ddd;
            margin: 15px 0;
            user-select: text;
            cursor: text;
        }
        .instructions {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
            border-left: 4px solid #2196f3;
        }
        .instructions h4 {
            margin-top: 0;
            color: #1976d2;
        }
        .status {
            text-align: center;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
            font-weight: 500;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .test-results {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 6px;
            border: 1px solid #dee2e6;
        }
        .debug-panel {
            position: fixed;
            top: 10px;
            right: 10px;
            width: 300px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-height: 400px;
            overflow-y: auto;
            z-index: 10000;
        }
        .debug-panel h4 {
            margin: 0 0 10px 0;
            color: #333;
        }
        .debug-log {
            font-family: monospace;
            font-size: 12px;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #e9ecef;
            max-height: 200px;
            overflow-y: auto;
        }
        .debug-log .log-entry {
            margin: 2px 0;
            padding: 2px 0;
        }
        .debug-log .log-entry.info { color: #0c5460; }
        .debug-log .log-entry.success { color: #155724; }
        .debug-log .log-entry.error { color: #721c24; }
        .debug-log .log-entry.warning { color: #856404; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª ì‹¤ì œ í™•ì¥ í”„ë¡œê·¸ë¨ í…ŒìŠ¤íŠ¸ í˜ì´ì§€</h1>

        <div class="status info">
            <strong>ì¤‘ìš”:</strong> ì´ í˜ì´ì§€ëŠ” ë¡œì»¬ ì„œë²„(http://localhost)ì—ì„œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ë©°, í™•ì¥ í”„ë¡œê·¸ë¨ì´ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.
        </div>

        <div class="instructions">
            <h4>ğŸ“‹ í…ŒìŠ¤íŠ¸ ë°©ë²•</h4>
            <ul>
                <li>ì´ í˜ì´ì§€ë¥¼ ë¡œì»¬ ì„œë²„ì—ì„œ ì‹¤í–‰í•˜ì„¸ìš” (ì˜ˆ: `python -m http.server 8000`)</li>
                <li>ì•„ë˜ ìƒ˜í”Œ í…ìŠ¤íŠ¸ë¥¼ ë“œë˜ê·¸í•˜ì—¬ ì„ íƒí•˜ì„¸ìš”</li>
                <li>ë“œë˜ê·¸ íŒì—…ì´ ë‚˜íƒ€ë‚˜ë©´ ì €ì¥ì„ í´ë¦­í•˜ì„¸ìš”</li>
                <li>í™•ì¥ í”„ë¡œê·¸ë¨ ì•„ì´ì½˜ì„ í´ë¦­í•˜ì—¬ íŒì—…ì„ ì—´ê³  ë°ì´í„°ê°€ ì €ì¥ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”</li>
            </ul>
        </div>

        <div class="demo-section">
            <h3>ğŸ¤– AI ì„œë¹„ìŠ¤ ëŒ€í™” ì˜ˆì‹œ</h3>
            <div class="sample-text">
                <p><strong>ì‚¬ìš©ì:</strong> ì¸ê³µì§€ëŠ¥ì´ í˜„ëŒ€ ì‚¬íšŒì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì— ëŒ€í•´ ì„¤ëª…í•´ì£¼ì„¸ìš”.</p>
                <p><strong>AI Assistant:</strong> ì¸ê³µì§€ëŠ¥ì€ í˜„ëŒ€ ì‚¬íšŒì— ë‹¤ë°©ë©´ìœ¼ë¡œ ì˜í–¥ì„ ë¯¸ì¹˜ê³  ìˆìŠµë‹ˆë‹¤. ì²«ì§¸, ì—…ë¬´ ìë™í™”ë¥¼ í†µí•´ ìƒì‚°ì„±ì„ í¬ê²Œ í–¥ìƒì‹œí‚¤ê³  ìˆìŠµë‹ˆë‹¤. ë‘˜ì§¸, ì˜ë£Œ, êµìœ¡, êµí†µ ë“± ë‹¤ì–‘í•œ ë¶„ì•¼ì—ì„œ í˜ì‹ ì ì¸ ë³€í™”ë¥¼ ì£¼ë„í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì…‹ì§¸, ê°œì¸í™”ëœ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ì—¬ ì‚¬ìš©ì ê²½í—˜ì„ ê°œì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
                <p>í•˜ì§€ë§Œ ë™ì‹œì— ì¼ìë¦¬ ëŒ€ì²´, ë°ì´í„° í”„ë¼ì´ë²„ì‹œ, í¸í–¥ì„± ë“±ì˜ ë¬¸ì œë„ ì œê¸°ë˜ê³  ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì¸ê³µì§€ëŠ¥ì˜ ë°œì „ì€ ê¸°ìˆ ì  ì§„ë³´ì™€ í•¨ê»˜ ì‚¬íšŒì , ìœ¤ë¦¬ì  ê³ ë¯¼ì´ ë³‘í–‰ë˜ì–´ì•¼ í•  ê²ƒì…ë‹ˆë‹¤.</p>
            </div>
        </div>

        <div class="demo-section">
            <h3>ğŸ’¡ ì•„ì´ë””ì–´ ë°œìƒ ì˜ˆì‹œ</h3>
            <div class="sample-text">
                <p><strong>í”„ë¡œì íŠ¸ ì•„ì´ë””ì–´:</strong> AI ê¸°ë°˜ ê°œì¸í™” í•™ìŠµ í”Œë«í¼</p>
                <p>ì‚¬ìš©ìì˜ í•™ìŠµ ìŠ¤íƒ€ì¼ê³¼ ì§„ë„ë¥¼ ë¶„ì„í•˜ì—¬ ìµœì ì˜ í•™ìŠµ ê²½ë¡œë¥¼ ì œì•ˆí•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ê° ì‚¬ìš©ìë³„ë¡œ ë§ì¶¤í˜• ì½˜í…ì¸ ë¥¼ ì¶”ì²œí•˜ê³ , í•™ìŠµ íš¨ìœ¨ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ë©°, í•„ìš”ì— ë”°ë¼ í•™ìŠµ ì „ëµì„ ë™ì ìœ¼ë¡œ ì¡°ì •í•©ë‹ˆë‹¤.</p>
                <p>ì£¼ìš” ê¸°ëŠ¥ìœ¼ë¡œëŠ” í•™ìŠµ íŒ¨í„´ ë¶„ì„, ì½˜í…ì¸  ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜, ì§„í–‰ë¥  ì‹œê°í™”, ì„±ê³¼ ì˜ˆì¸¡ ë“±ì´ í¬í•¨ë©ë‹ˆë‹¤. ì´ëŠ” íŠ¹íˆ ì›ê²© í•™ìŠµê³¼ ìê¸°ì£¼ë„ í•™ìŠµ í™˜ê²½ì—ì„œ í° íš¨ê³¼ë¥¼ ë°œíœ˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            </div>
        </div>

        <div class="demo-section">
            <h3>ğŸ” ê¸°ìˆ  ì„¤ëª… ì˜ˆì‹œ</h3>
            <div class="sample-text">
                <p><strong>ë¨¸ì‹ ëŸ¬ë‹ ëª¨ë¸ ìµœì í™” ê¸°ë²•:</strong></p>
                <p>1. í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹: ê·¸ë¦¬ë“œ ì„œì¹˜, ëœë¤ ì„œì¹˜, ë² ì´ì§€ì•ˆ ìµœì í™” ë“±ì˜ ë°©ë²•ì„ ì‚¬ìš©í•˜ì—¬ ëª¨ë¸ì˜ ì„±ëŠ¥ì„ ê·¹ëŒ€í™”í•©ë‹ˆë‹¤.</p>
                <p>2. ì •ê·œí™” ê¸°ë²•: L1/L2 ì •ê·œí™”, ë“œë¡­ì•„ì›ƒ, ì¡°ê¸° ì¢…ë£Œ ë“±ì„ í†µí•´ ê³¼ì í•©ì„ ë°©ì§€í•˜ê³  ëª¨ë¸ì˜ ì¼ë°˜í™” ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.</p>
                <p>3. ì•™ìƒë¸” ê¸°ë²•: ì—¬ëŸ¬ ëª¨ë¸ì˜ ì˜ˆì¸¡ì„ ê²°í•©í•˜ì—¬ ê°œë³„ ëª¨ë¸ë³´ë‹¤ ë” ë›°ì–´ë‚œ ì„±ëŠ¥ì„ ë‹¬ì„±í•©ë‹ˆë‹¤. ë°°ê¹…, ë¶€ìŠ¤íŒ…, ìŠ¤íƒœí‚¹ ë“± ë‹¤ì–‘í•œ ì ‘ê·¼ë²•ì´ ìˆìŠµë‹ˆë‹¤.</p>
            </div>
        </div>

        <div class="test-results">
            <h4>ğŸ§ª í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸</h4>
            <ul id="test-checklist">
                <li>âœ“ í…ìŠ¤íŠ¸ ì„ íƒ ì‹œ ë“œë˜ê·¸ íŒì—…ì´ ë‚˜íƒ€ë‚¨</li>
                <li>âœ“ ë“œë˜ê·¸ íŒì—…ì—ì„œ ì €ì¥ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•¨</li>
                <li>âœ“ í™•ì¥ í”„ë¡œê·¸ë¨ íŒì—…ì—ì„œ ì €ì¥ëœ ë°ì´í„°ë¥¼ ë³¼ ìˆ˜ ìˆìŒ</li>
                <li>âœ“ ë‘ íŒì—… ê°„ì˜ ë°ì´í„°ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ë™ê¸°í™”ë¨</li>
            </ul>
        </div>

        <div style="text-align: center; margin-top: 30px;">
            <button onclick="clearTestData()" style="background: #dc3545; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer;">í…ŒìŠ¤íŠ¸ ë°ì´í„° ì •ë¦¬</button>
            <button onclick="checkExtensionStatus()" style="background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer;">í™•ì¥ í”„ë¡œê·¸ë¨ ìƒíƒœ í™•ì¸</button>
        </div>
    </div>

    <!-- ë””ë²„ê¹… íŒ¨ë„ -->
    <div class="debug-panel" id="debug-panel">
        <h4>ğŸ” ë””ë²„ê¹… íŒ¨ë„</h4>
        <div class="debug-log" id="debug-log"></div>
        <button onclick="clearDebugLog()" style="margin-top: 10px; padding: 5px 10px; border: 1px solid #ddd; background: #f8f9fa; border-radius: 4px; cursor: pointer;">ë¡œê·¸ ì§€ìš°ê¸°</button>
    </div>

    <script>
        // ë””ë²„ê¹… ë¡œê·¸ ì‹œìŠ¤í…œ
        class DebugLogger {
            constructor() {
                this.logContainer = document.getElementById('debug-log');
                this.logs = [];
            }

            log(message, type = 'info') {
                const timestamp = new Date().toLocaleTimeString();
                const logEntry = {
                    timestamp,
                    message,
                    type
                };

                this.logs.push(logEntry);
                this.displayLog(logEntry);

                // ì½˜ì†”ì—ë„ ì¶œë ¥
                console.log(`[${timestamp}] ${message}`, type);
            }

            displayLog(logEntry) {
                const logDiv = document.createElement('div');
                logDiv.className = `log-entry ${logEntry.type}`;
                logDiv.innerHTML = `<strong>[${logEntry.timestamp}]</strong> ${logEntry.message}`;

                this.logContainer.appendChild(logDiv);
                this.logContainer.scrollTop = this.logContainer.scrollHeight;

                // ë¡œê·¸ ê°œìˆ˜ ì œí•œ
                if (this.logContainer.children.length > 50) {
                    this.logContainer.removeChild(this.logContainer.firstChild);
                }
            }

            clear() {
                this.logs = [];
                this.logContainer.innerHTML = '';
            }
        }

        const debugLogger = new DebugLogger();

        // í™•ì¥ í”„ë¡œê·¸ë¨ ìƒíƒœ í™•ì¸
        async function checkExtensionStatus() {
            debugLogger.log('í™•ì¥ í”„ë¡œê·¸ë¨ ìƒíƒœ í™•ì¸ ì‹œì‘...', 'info');

            try {
                if (typeof chrome !== 'undefined' && chrome.runtime) {
                    // í™•ì¥ í”„ë¡œê·¸ë¨ ID í™•ì¸
                    debugLogger.log(`Chrome Runtime API ì‚¬ìš© ê°€ëŠ¥`, 'info');

                    try {
                        // ë°±ê·¸ë¼ìš´ë“œ ìŠ¤í¬ë¦½íŠ¸ì™€ í†µì‹  í…ŒìŠ¤íŠ¸
                        const response = await chrome.runtime.sendMessage({ action: 'getSyncStatus' });

                        if (response && response.success) {
                            debugLogger.log(`í™•ì¥ í”„ë¡œê·¸ë¨ê³¼ í†µì‹  ì„±ê³µ`, 'success');
                            debugLogger.log(`í´ë¦½ ìˆ˜: ${response.data.clipCount}`, 'info');
                            debugLogger.log(`ì¹´í…Œê³ ë¦¬ ìˆ˜: ${response.data.categoryCount}`, 'info');
                        } else {
                            debugLogger.log(`í™•ì¥ í”„ë¡œê·¸ë¨ ì‘ë‹µ ì—†ìŒ`, 'error');
                        }
                    } catch (error) {
                        debugLogger.log(`í™•ì¥ í”„ë¡œê·¸ë¨ í†µì‹  ì‹¤íŒ¨: ${error.message}`, 'error');
                    }
                } else {
                    debugLogger.log(`Chrome Runtime API ì‚¬ìš© ë¶ˆê°€`, 'error');
                }
            } catch (error) {
                debugLogger.log(`ìƒíƒœ í™•ì¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        // í…ŒìŠ¤íŠ¸ ë°ì´í„° ì •ë¦¬
        async function clearTestData() {
            debugLogger.log('í…ŒìŠ¤íŠ¸ ë°ì´í„° ì •ë¦¬ ì‹œì‘...', 'info');

            try {
                if (typeof chrome !== 'undefined' && chrome.runtime) {
                    const response = await chrome.runtime.sendMessage({ action: 'clearTestData' });

                    if (response && response.success) {
                        debugLogger.log(`í…ŒìŠ¤íŠ¸ ë°ì´í„° ì •ë¦¬ ì„±ê³µ`, 'success');
                    } else {
                        debugLogger.log(`í…ŒìŠ¤íŠ¸ ë°ì´í„° ì •ë¦¬ ì‹¤íŒ¨`, 'error');
                    }
                } else {
                    debugLogger.log(`í™•ì¥ í”„ë¡œê·¸ë¨ API ì‚¬ìš© ë¶ˆê°€`, 'error');
                }
            } catch (error) {
                debugLogger.log(`ë°ì´í„° ì •ë¦¬ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        // ë””ë²„ê·¸ ë¡œê·¸ ì§€ìš°ê¸°
        function clearDebugLog() {
            debugLogger.clear();
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', () => {
            debugLogger.log('í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë“œë¨', 'info');
            debugLogger.log(`í˜„ì¬ URL: ${window.location.href}`, 'info');

            // 5ì´ˆ í›„ ìë™ìœ¼ë¡œ í™•ì¥ í”„ë¡œê·¸ë¨ ìƒíƒœ í™•ì¸
            setTimeout(checkExtensionStatus, 5000);

            // í…ìŠ¤íŠ¸ ì„ íƒ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.addEventListener('mouseup', (event) => {
                const selection = window.getSelection();
                const selectedText = selection.toString().trim();

                if (selectedText.length > 0) {
                    debugLogger.log(`í…ìŠ¤íŠ¸ ì„ íƒë¨: "${selectedText.substring(0, 50)}..."`, 'info');
                }
            });
        });

        // í™•ì¥ í”„ë¡œê·¸ë¨ ë©”ì‹œì§€ ë¦¬ìŠ¤ë„ˆ
        if (typeof chrome !== 'undefined' && chrome.runtime) {
            chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {
                debugLogger.log(`ë©”ì‹œì§€ ìˆ˜ì‹ : ${request.action}`, 'info');

                if (request.action === 'storageChanged') {
                    debugLogger.log(`ìŠ¤í† ë¦¬ì§€ ë³€ê²½ ê°ì§€: ${request.dataType}`, 'success');
                }
            });
        }
    </script>
</body>
</html>