<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popup Position Test Runner</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-width: 800px;
        }
        .test-result {
            margin: 5px 0;
            padding: 5px;
            border-radius: 4px;
        }
        .test-result.passed {
            background-color: #d4edda;
            color: #155724;
        }
        .test-result.failed {
            background-color: #f8d7da;
            color: #721c24;
        }
        .summary {
            margin-top: 20px;
            padding: 15px;
            background-color: #e9ecef;
            border-radius: 8px;
            font-weight: bold;
        }
        .summary.all-passed {
            background-color: #d4edda;
            color: #155724;
        }
        .summary.some-failed {
            background-color: #f8d7da;
            color: #721c24;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 10px 0;
        }
        button:hover {
            background-color: #0056b3;
        }
        #testOutput {
            margin-top: 20px;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            border: 1px solid #dee2e6;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§ª í™•ì¥ íŒì—… ìœ„ì¹˜ ê³„ì‚° í…ŒìŠ¤íŠ¸</h1>
        <p>PopupManagerì˜ ìœ„ì¹˜ ê³„ì‚° ë¡œì§ì„ TDD ë°©ì‹ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>

        <button onclick="runTests()">ğŸš€ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
        <button onclick="clearResults()">ğŸ§¹ ê²°ê³¼ ì§€ìš°ê¸°</button>

        <div id="testResults"></div>
        <div id="testSummary"></div>
        <div id="testOutput"></div>
    </div>

    <script src="test-popup-position.js"></script>
    <script>
        function runTests() {
            const testResultsDiv = document.getElementById('testResults');
            const testSummaryDiv = document.getElementById('testSummary');
            const testOutputDiv = document.getElementById('testOutput');

            // ê¸°ì¡´ ê²°ê³¼ ì§€ìš°ê¸°
            testResultsDiv.innerHTML = '';
            testSummaryDiv.innerHTML = '';
            testOutputDiv.textContent = '';

            console.log = function(...args) {
                testOutputDiv.textContent += args.join(' ') + '\n';
                console.log.apply(console, args);
            };

            // í…ŒìŠ¤íŠ¸ ì‹¤í–‰
            const test = new PopupPositionTest();
            const allPassed = test.runAllTests();

            // ê²°ê³¼ í‘œì‹œ
            test.testResults.forEach(result => {
                const div = document.createElement('div');
                div.className = 'test-result ' + (result.startsWith('âœ…') ? 'passed' : 'failed');
                div.textContent = result;
                testResultsDiv.appendChild(div);
            });

            // ìš”ì•½ í‘œì‹œ
            const summary = document.createElement('div');
            summary.className = 'summary ' + (allPassed ? 'all-passed' : 'some-failed');
            summary.innerHTML = `
                <h3>ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìš”ì•½</h3>
                <p>ì´ í…ŒìŠ¤íŠ¸: ${test.totalTests}, í†µê³¼: ${test.passedTests}, ì‹¤íŒ¨: ${test.totalTests - test.passedTests}</p>
                <p>ì„±ê³µë¥ : ${((test.passedTests / test.totalTests) * 100).toFixed(1)}%</p>
                <p>${allPassed ? 'ğŸ‰ ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼!' : 'âš ï¸ ì¼ë¶€ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ - êµ¬í˜„ì´ í•„ìš”í•©ë‹ˆë‹¤.'}</p>
            `;
            testSummaryDiv.appendChild(summary);
        }

        function clearResults() {
            document.getElementById('testResults').innerHTML = '';
            document.getElementById('testSummary').innerHTML = '';
            document.getElementById('testOutput').textContent = '';
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì‹¤í–‰
        window.onload = function() {
            console.log('í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ - í…ŒìŠ¤íŠ¸ ì¤€ë¹„ë¨');
        };
    </script>
</body>
</html>