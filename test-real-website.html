<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClipGo 실제 웹사이트 테스트</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f8f9fa;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }
        .test-text {
            background: #f5f5f5;
            padding: 20px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #007bff;
        }
        .instructions {
            background: #e8f4f8;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>🧪 ClipGo 실제 웹사이트 테스트</h1>

    <div class="instructions">
        <h2>📋 테스트 방법</h2>
        <p>아래 텍스트들을 드래그하여 ClipGo 확장 프로그램을 테스트해보세요</p>
    </div>

    <div class="test-text">
        <h2>📋 테스트 방법</h2>
        <p>확장 프로그램 업데이트: Chrome 확장 프로그램 페이지에서 업데이트 버튼 클릭</p>
        <p>텍스트 드래그: 이 텍스트를 드래그하면 저장 팝업이 나타나야 합니다</p>
        <p>저장 확인: 팝업에서 저장 후 확장 프로그램 팝업에서 확인</p>
    </div>

    <div class="test-text">
        <p>이것은 테스트용 샘플 텍스트입니다. 이 텍스트를 드래그하여 ClipGo 확장 프로그램이 제대로 작동하는지 확인할 수 있습니다.</p>
    </div>

    <!-- 모의 Chrome API 로드 -->
    <script src="test-mock-chrome-api.js"></script>

    <!-- ClipGo 콘텐츠 스크립트 로드 -->
    <script src="src/StorageManager.js"></script>
    <script src="src/CategoryManager.js"></script>
    <script src="src/ClipManager.js"></script>
    <script src="content.js"></script>

    <!-- Manager 초기화 스크립트 -->
    <script>
        // 테스트 환경에서 Manager 초기화
        window.addEventListener('load', async () => {
            try {
                // StorageManager 초기화
                if (window.StorageManager) {
                    await window.StorageManager.init();
                }

                // CategoryManager 초기화
                if (window.CategoryManager) {
                    await window.CategoryManager.init();
                }

                // ClipManager 초기화
                if (window.ClipManager) {
                    await window.ClipManager.init();
                }

                console.log('✅ Test environment managers initialized');
            } catch (error) {
                console.error('❌ Manager initialization failed:', error);
            }
        });
    </script>

    <script>
        // 텍스트 선택 이벤트 핸들러
        document.addEventListener('mouseup', () => {
            const selection = window.getSelection();
            if (selection.toString().length > 0) {
                console.log('테스트 페이지 - 텍스트 선택됨:', selection.toString().substring(0, 100));
            }
        });
    </script>
</body>
</html>